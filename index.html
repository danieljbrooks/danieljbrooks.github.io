<!DOCTYPE html>
<html>
<body>


<!-- Include DTK cardlist --> 
<script src="DTK.js"></script>

<!--Primary Javascript section--> 
<script>
//Define the card class
function Card(name, castingcost1, castingcost2, cardtype, rarity, myranking){
  this.name=name;
  this.castingcost1=castingcost1;
  this.castingcost2=castingcost2;
  this.cardtype=cardtype;
  this.rarity=rarity;
  this.myranking=myranking;
}

//Define the pack class
function Pack(cardlist){
  this.pack_contents=[];

  //Define card contents
  this.pack_size=0;
  var common=0;
  var uncommon=0;
  var rare=0;
  var mythic=0;
  
  //Determine number of cards in set
  var cards_in_set=cardlist.length
  
  //figure out if mythic or rare
  mythic_roll=Math.floor((Math.random() * 121) + 1);
  if (mythic_roll>15){
    mythic=1;
  } else {
    rare=1;
  }

  //add cards without duplication
  while(this.pack_size<15){
    
    //choose a random card in DTK
    card_roll=Math.floor((Math.random() * cards_in_set));
    var new_card = card_list[card_roll];
    
    //Check if card in pack contents
    card_in_pack=0;
    this.pack_size=pack_contents.length;
    for (var i = 0; i < this.pack_size; i++) {
      if ( new_card.name.localeCompare(pack_contents[i].name) ){
        card_in_pack=1;
      }
    }
    
    //Determine card rarity and add new card to pack if possible
    rarity_nc=new_card.rarity
    if (!card_in_pack){
      if (rarity_nc=="C" && common < 11){
      	this.pack_contents.push(new_card);
      } else if (rarity_nc=="U" && uncommon < 3){
      	this.pack_contents.push(new_card);
      } else if (rarity_nc=="R" && rare < 1){
      	this.pack_contents.push(new_card);
      } else if (rarity_nc=="M" && mythic < 1){
      	this.pack_contents.push(new_card);
      }
   }    
    //Update pack_size
    this.pack_size=pack_contents.length;
}
</script>


<button onclick="myFunction()">Generate Pack</button>

<script>
function myFunction() {
    var pack1 = new Pack("DTK");
    
    
    //for each card in the pack
    var string_contents="The cards in this pack are: ";
    for (var i = 0; i < pack1.pack_size; i++) {
      string_contents.concat(string_contents, pack1.pack_contents[i].name);
      string_contents.concat(string_contents, " ");

    }
    alert("Hello! I am an alert box!");
    alert(string_contents)
}
</script>



<h1> Behold, pictures of dragons. Check back soon for the draft simulator!</h1>
<p><a href="https://www.pythonanywhere.com/gists/905201f664f09b8a3b11/code.py/ipython2/">Draft Simulator (Pre-Alpha)!</a></p>
<p>Interested? Contact danielbrooks20 at gmail dot com</p>


<p id="demo">Display the result here.</p>
<!-- test card functionality -->

<img src="/DTK/Dragonlord_Dromoka.png";>

<script>
function Card(name, castingcost1, castingcost2, cardtype, rarity, myranking){
  this.name=name
  this.castingcost1=castingcost1
  this.castingcost2=castingcost2
  this.cardtype=cardtype
  this.rarity=rarity
  this.myranking=myranking
}

dragonlord_dromoka = new Card('dragonlord_dromoka', '4GW', 'none', 'Creature', 'M', 4.9)
document.getElementById("demo").innerHTML = dragonlord_dromoka.name;
</script>
<p id="demo2">Display the result here.</p>

<img src="/DTK/Acid-Spewer_Dragon.png";>

<script>
var person = {Name:"Acid-Spewer Dragon", lastName:"3+5BB"};
document.getElementById("demo2").innerHTML = person.Name;
</script>

</body>
</html>


<!--

<h1>MTG CARD PICKER BOT DEMO</h1>

<button onclick="generateCards()">New Choices</button>

<p id = "cardList"></p>

<button onclick="makePick()">Make Pick</button>

<p id = "output"></p>

<button onclick=location.reload()>Reload Page</button>

<script>
//
//var cards = ["C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8", "C9", "C10", "C11", "C12", "C13", "C14"];
var cards = [];
var i;
function generateCards()
{
	for(i = 0; i < 14; i++)
	{
		var card = {cName: "C" + i, weight: Math.random()};
		cards[i] = card;
		//weight[i] = Math.random();
	}
	var text = ""

	i = 0;
	for(i = 0; i < cards.length; i++)
	{
		text += " " + cards[i].cName + " : " + cards[i].weight + "<br>";
	}
	
	document.getElementById("cardList").innerHTML = text;
}


function makePick()

{
	var pick = cards[0];
	var weight = cards[0].weight;
	
	for(i = 0; i < cards.length; i++)
	{
		if(cards[i].weight > weight)
		{
			pick = cards[i];
			weight = cards[i].weight;
		}
	}
	
	
	document.getElementById("output").innerHTML = " " + pick.cName + " : " + pick.weight + "<br>";
}


</script>

-->
